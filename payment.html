<!DOCTYPE html>
< lang="en">
<head>
    <meta charset="UTF-8">
    <title>Secure Payment | Gear 4 Rent</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .payment-container { max-width: 500px; margin: 50px auto; background: white; padding: 30px; border-radius: 15px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); text-align: center; }
        .payment-option { display: flex; align-items: center; padding: 15px; border: 1px solid #e2e8f0; border-radius: 10px; margin-bottom: 15px; cursor: pointer; transition: 0.3s; }
        .payment-option:hover { border-color: #1e3a8a; background: #f0f4ff; }
        .payment-option img { height: 30px; margin-right: 15px; }
        .total-amount { font-size: 1.5rem; font-weight: 800; color: #1e3a8a; margin: 20px 0; }
    </style>
</head>
<>
    <header><a href="index.html" class="logo">‚öôÔ∏è GEAR 4 RENT</a></header>

    <div class="payment-container">
        <h2>Complete Your Payment</h2>
        <p>Order Total (First Month Rent)</p>
        <div class="total-amount" id="payAmount">‚Çπ0</div>

        <div class="payment-option" onclick="processPayment('UPI')">
            <img src="https://upload.wikimedia.org/wikipedia/commons/e/e1/UPI-Logo-vector.svg" alt="UPI">
            <span>Pay via UPI (PhonePe / Google Pay)</span>
        </div>

        <div class="payment-option" onclick="processPayment('Card')">
            <span>üí≥ Debit / Credit Card</span>
        </div>

        <div class="payment-option" onclick="processPayment('NetBanking')">
            <span>üè¶ Net Banking</span>
        </div>

        <p style="font-size: 0.8rem; color: #64748b;">üîí Your transaction is secured with 256-bit encryption.</p>
    </div>

    <script>
        // Catch the price from URL
        window.onload = function() {
            const params = new URLSearchParams(window.location.search);
            document.getElementById('payAmount').innerText = "‚Çπ" + params.get('price');
        }

        function processPayment(method) {
            alert("Processing " + method + " Payment...");
            setTimeout(() => {
                alert("üéâ Payment Successful! Your order has been placed.");
                window.location.href = "index.html";
            }, 2000); // Simulates a 2-second processing time
        }

        function processPayment(method) {
    alert("Processing " + method + " Payment...");
    
    // Simulate a successful transaction
    setTimeout(() => {
        // --- THIS IS STEP 4A ---
        // Grab the data from the URL or local variables
        const params = new URLSearchParams(window.location.search);
        const laptop = params.get('name') || "Unknown Laptop";
        const price = params.get('price') || "0";

        // Save to Firebase
        db.collection("orders").add({
            laptop: laptop,
            amount: price,
            paymentMethod: method,
            status: "Paid",
            timestamp: firebase.firestore.FieldValue.serverTimestamp()
        })
        .then(() => {
            alert("üéâ Payment Successful & Order Saved to Cloud!");
            window.location.href = "index.html";
        })
        .catch((error) => {
            console.error("Database Error: ", error);
        });
    }, 2000);
}

    </script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyCWZsMhVEB1HbbkTC8igAPlsoE8EzqBtzU",
            authDomain: "gear-4-rent.firebaseapp.com",
            projectId: "gear-4-rent",
            storageBucket: "gear-4-rent.firebasestorage.app",
            messagingSenderId: "1058165643099",
            appId: "1:1058165643099:web:70fb0e2411710173aeec7e",
            measurementId: "G-45SJ1RX06L"
        };

        // Initialize Firebase with protection
        if (!firebase.apps.length) {
            firebase.initializeApp(firebaseConfig);
        }

        // Global variables so your other scripts can 'see' the database
        window.db = firebase.firestore();
        window.auth = firebase.auth();

        console.log("Connected to Gear 4 Rent Cloud! üöÄ");
    </script>

</body>
</html>